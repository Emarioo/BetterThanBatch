// #import "examples/crawler/main" // With hotreloading
// #import "examples/crawler/GameCore" // Without hotreloading

/*  
    Today's quest: Hardware/software exceptions

    Stuff to consider when implementing exceptions:
        Windows and Linux does it differently.
        On Windows we need to:
            Create three additional sections (.xdata, .pdata, .text$x)
            Fill them with function entries, unwind info? code of exception handlers.
        On Linux we need to:
            Emit function call to sigaction before "try", and fill the sigaction data structure that is passed, also store previous sigaction structure.
            Emit function call to sigaction at the end of try to
*/

// #import "Logger"

enum ExceptionType {
    EXCEPTION_MEMORY,
    EXCEPTION_ZERO_DIVISION,
}

try {
    // *cast<i32*>cast<i64>0 = 0
} catch EXCEPTION_MEMORY {
    prints("caught\n")
}
prints("done\n")

fn @oscall exception_handler() {

}